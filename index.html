<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª - Ø§Ù„Ø¹Ø²ÙŠØ²Ø©</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
Â  Â  --main: #667eea;
Â  Â  --main2: #764ba2;
Â  Â  --accent: #a855f7;
Â  Â  --success: #22c55e;
Â  Â  --danger: #b91c1c;
Â  Â  --light: #f4f6fb;
Â  Â  --dark: #1e293b;
Â  Â  --bg-grad: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
*, *::before, *::after {
Â  Â  margin: 0; padding: 0; box-sizing: border-box; font-family: "Cairo", sans-serif;
}
/* Ø®Ù„ÙÙŠØ© */
body {
Â  Â  min-height: 100vh;
Â  Â  background:
Â  Â  Â  Â  radial-gradient(circle at top left, rgba(255,255,255,0.14) 0, transparent 55%),
Â  Â  Â  Â  radial-gradient(circle at bottom right, rgba(0,0,0,0.18) 0, transparent 60%),
Â  Â  Â  Â  var(--bg-grad);
Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  padding: 18px; color: var(--dark);
}
.hidden {display: none !important;}
.container {
Â  Â  width: 100%; max-width: 800px; background: #fff;
Â  Â  padding: 38px 26px 28px 26px; border-radius: 24px;
Â  Â  box-shadow: 0 18px 55px rgba(15, 23, 42, 0.32),
Â  Â  Â  Â  0 0 0 1px rgba(255, 255, 255, 0.3) inset;
Â  Â  border: 1px solid rgba(226, 232, 255, 0.9); position: relative; overflow: hidden;
Â  Â  animation: fadeIn 0.7s cubic-bezier(.4, 0, .2, 1);
}
.container::before, .container::after {
Â  Â  content: "";
Â  Â  position: absolute; pointer-events: none; opacity: 0.9;
}
.container::before {
Â  Â  inset-inline-start: -90px; inset-block-start: -90px;
Â  Â  width: 180px; height: 180px;
Â  Â  background: radial-gradient(circle, rgba(102, 126, 234, 0.17), transparent 70%);
}
.container::after {
Â  Â  inset-inline-end: -110px; inset-block-end: -110px;
Â  Â  width: 220px; height: 220px;
Â  Â  background: radial-gradient(circle, rgba(118, 75, 162, 0.16), transparent 70%);
}
@keyframes fadeIn {
Â  Â  0% { opacity: 0; transform: translateY(18px) scale(.98);}
Â  Â  100% { opacity: 1; transform: translateY(0) scale(1);}
}
/* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„ØªØ±ÙˆÙŠØ³Ø§Øª */
h2#welcome-title {
Â  Â  position: relative; z-index: 1;
Â  Â  font-size: 2.1em; font-weight: 900; color: var(--main);
Â  Â  text-align: center; margin-bottom: 20px; letter-spacing: 0.5px;
}
h2#welcome-title::after {
Â  Â  content: ""; display: block; width: 90px; height: 4px;
Â  Â  border-radius: 999px; margin: 8px auto 0;
Â  Â  background: linear-gradient(90deg, var(--main), var(--accent));
}
/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù„Ø¬Ù†Ø© */
.committee-info {
Â  Â  position: relative; z-index: 1;
Â  Â  background: linear-gradient(90deg, #eef2ff 0%, #e0f2fe 100%);
Â  Â  padding: 14px 16px; text-align: center;
Â  Â  border-radius: 16px; border-right: 4px solid var(--main); margin-bottom: 20px;
Â  Â  box-shadow: 0 8px 22px rgba(15, 23, 42, 0.09);
}
#committee-name-display {
Â  Â  font-size: 1.15em; font-weight: 800; color: #1e293b; margin-bottom: 4px;
}
#committee-address-display {font-size: 0.95em; color: #475569;}
label {
Â  Â  display: block; position: relative; z-index: 1;
Â  Â  color: #4b5563; font-weight: 700; margin-top: 18px; margin-bottom: 6px;
Â  Â  font-size: 1.02em;
}
input[type="text"], input[type="password"], textarea {
Â  Â  width: 100%; padding: 12px 14px; border-radius: 12px;
Â  Â  border: 1.3px solid #cbd5f5; background: #f9fafb;
Â  Â  margin-bottom: 4px; font-size: 1.03em; color: #111827;
Â  Â  transition: border-color .18s, box-shadow .18s, background .18s;
Â  Â  resize: none;
}
input[type="text"]:focus, input[type="password"]:focus, textarea:focus {
Â  Â  border-color: var(--main); background: #f5f3ff; outline: none;
Â  Â  box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.15);
}
.candidate-list {
Â  Â  margin-top: 6px; background: #f3f4ff;
Â  Â  border: 1.5px solid #e0e7ff; border-radius: 18px;
Â  Â  max-height: 46vh; overflow-y: auto; padding: 10px;
Â  Â  display: grid; grid-template-columns: 1fr 1fr; gap: 9px;
}
.candidate-item {
Â  Â  background: #fff; border: 1.4px solid #e5e7ff; padding: 11px 9px;
Â  Â  border-radius: 14px; display: flex; align-items: center; justify-content: space-between;
Â  Â  cursor: pointer; user-select: none; position: relative; overflow: hidden;
Â  Â  box-shadow: 0 6px 15px rgba(148, 163, 255, 0.30);
Â  Â  font-size: 0.98em; transition: background .18s, color .18s, transform .1s, box-shadow .18s, border-color .18s;
}
.candidate-item:hover {transform: translateY(-1px); box-shadow: 0 10px 24px rgba(79, 70, 229, 0.27);}
.candidate-item.selected {
Â  Â  background: linear-gradient(115deg, var(--main2), var(--main));
Â  Â  color: #fff; border-color: transparent;
Â  Â  box-shadow: 0 10px 28px rgba(76, 81, 191, 0.52);
}
.num-circle {
Â  Â  width: 32px; height: 32px; background: #eef2ff; color: var(--main); font-weight: 800;
Â  Â  font-size: 0.98em; border-radius: 50%; display: inline-flex; align-items: center;
Â  Â  justify-content: center; margin-left: 10px; flex-shrink: 0;
Â  Â  transition: background .18s, color .18s, transform .18s;
}
.candidate-item.selected .num-circle {
Â  Â  background: rgba(255,255,255,0.18); color: #fff; transform: scale(1.02);
}
.candidate-item > div:last-child { font-size: 1.3em; }
.candidate-checkbox { display: none; }
.sec-box {
Â  Â  background: #f8fafc; border: 1.6px solid #e2e8f0; border-radius: 16px;
Â  Â  padding: 14px 14px 16px 14px; margin-top: 20px;
Â  Â  box-shadow: 0 6px 18px rgba(148, 163, 184, 0.18);
Â  Â  font-size: 0.97em; color: #0f172a; position: relative; z-index: 1;
}
.sec-box > span {display: block; margin-bottom: 10px; font-weight: 700;}
.radio-group {display: grid; grid-template-columns: 1fr 1fr; gap: 10px;}
.radio-item {
Â  Â  padding: 11px 10px; border: 1.7px solid #d4d4ff; border-radius: 12px;
Â  Â  cursor: pointer; text-align: center; font-weight: 700; color: #1f2933; background: #fff;
Â  Â  box-shadow: 0 3px 12px rgba(148, 163, 255, 0.35);
Â  Â  transition: background .18s, color .18s, border-color .18s, transform .08s, box-shadow .18s;
Â  Â  font-size: 0.97em;
}
.radio-item:hover {transform: translateY(-0.5px); box-shadow: 0 6px 18px rgba(129, 140, 248, 0.6);}
.radio-item.selected {
Â  Â  background: linear-gradient(120deg, var(--success), #16a34a);
Â  Â  color: #fff; border-color: transparent;
Â  Â  box-shadow: 0 9px 22px rgba(22, 163, 74, 0.5);
}
.button-row {display: flex; gap: 10px; margin-top: 22px; position: relative; z-index: 1;}
.btn-primary, .btn-reset, .btn-logout {
Â  Â  flex: 1; padding: 12px 10px; border-radius: 12px; border: none; font-weight: 800;
Â  Â  font-size: 0.96em; cursor: pointer;
Â  Â  transition: background .15s, transform .08s, box-shadow .15s, color .15s;
Â  Â  font-family: "Cairo", sans-serif;
}
.btn-primary {
Â  Â  background: var(--bg-grad); color: #fff;
Â  Â  box-shadow: 0 10px 24px rgba(76, 81, 191, 0.65);
}
.btn-primary:hover {transform: translateY(-1px); box-shadow: 0 14px 28px rgba(76, 81, 191, 0.85);}
.btn-primary:disabled {opacity: 0.7; cursor: wait; box-shadow: none;}
.btn-reset {
Â  Â  background: #e0f2fe; color: #0369a1; box-shadow: 0 6px 18px rgba(56, 189, 248, 0.50);
}
.btn-reset:hover {background: #bae6fd; transform: translateY(-1px);}
.btn-logout {
Â  Â  background: #fee2e2; color: var(--danger); box-shadow: 0 6px 18px rgba(239, 68, 68, 0.45);
}
.btn-logout:hover {background: #fecaca; transform: translateY(-1px);}
#msg-warn, #msg-confirm {
Â  Â  position: relative; z-index: 1; text-align: center; margin-top: 10px; font-weight: 700; font-size: 0.95em;
}
#msg-warn {color: var(--danger);}
#msg-confirm {color: #15803d;}
/* Ø´Ø§Ø´Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± */
#login-box {
Â  Â  position: fixed; inset: 0;
Â  Â  background: linear-gradient(135deg,#1d2671, #c33764);
Â  Â  z-index: 9999999; display: flex; justify-content: center; align-items: center;
Â  Â  padding: 18px;
}
.login-card {
Â  Â  background: rgba(15, 23, 42, 0.86);
Â  Â  padding: 26px 22px 20px 22px;
Â  Â  border-radius: 18px; width: 90%; max-width: 360px; text-align: center;
Â  Â  color: #e5e7eb; box-shadow: 0 18px 45px rgba(15, 23, 42, 0.9);
Â  Â  backdrop-filter: blur(10px); border: 1px solid rgba(148, 163, 184, 0.6);
}
.login-card h3 {margin-bottom: 12px; font-weight: 800; font-size: 1.2em;}
.login-card p {font-size: 0.9em; color: #cbd5f5; margin-bottom: 10px;}
.login-card input[type="password"] {
Â  Â  background: rgba(15, 23, 42, 0.9); border-color: #4b5563; color: #e5e7eb;
}
#pass-btn {
Â  Â  width: 100%; margin-top: 6px;
Â  Â  background: var(--bg-grad); color: #fff; border: none; border-radius: 11px;
Â  Â  font-weight: 800; padding: 12px; cursor: pointer;
Â  Â  box-shadow: 0 10px 26px rgba(59, 130, 246, 0.7);
}
#pass-btn:hover {transform: translateY(-1px); box-shadow: 0 15px 30px rgba(59, 130, 246, 0.95);}
#pass-error {margin-top: 8px; color: #fecaca; font-size: 0.9em;}
/* responsive */
@media (max-width: 640px) {
Â  Â  .container {padding: 26px 8px 16px 8px; border-radius: 20px;}
Â  Â  h2#welcome-title {font-size: 1.3em;}
Â  Â  .committee-info {padding-inline: 10px; font-size: 0.95em;}
Â  Â  .candidate-list {grid-template-columns: 1fr; max-height: 53vh;}
Â  Â  .button-row {flex-direction: column;}
Â  Â  .btn-primary, .btn-reset, .btn-logout {width: 100%;}
}
</style>
</head>
<body>

<div id="login-box">
Â  <div class="login-card">
Â  Â  <h3>ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</h3>
Â  Â  <p>Ù…Ø®ØµØµ Ù„Ø£ÙØ±Ø§Ø¯ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¹Ø²ÙŠØ²Ø© ÙÙ‚Ø·</p>
Â  Â  <input id="pass-input" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
Â  Â  <button id="pass-btn">Ø¯Ø®ÙˆÙ„</button>
Â  Â  <p id="pass-error" style="display:none;"></p>
Â  </div>
</div>

<div class="container hidden" id="main-container">
Â  <h2 id="welcome-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª - Ø§Ù„Ø¹Ø²ÙŠØ²Ø©</h2>

Â  <div class="committee-info">
Â  Â  <div id="committee-name-display">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
Â  Â  <div id="committee-address-display">Ù…Ø¯Ø±Ø³Ø© Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ø²ÙŠØ²Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</div>
Â  </div>

Â  <form id="vote-form">
Â  Â  <label>Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø®Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
Â  Â  <input type="text" id="voter-name" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ù‡Ù†Ø§...">

Â  Â  <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø´Ø­ (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 2):</label>
Â  Â  <div id="candidate-list" class="candidate-list"></div>

Â  Â  <div class="sec-box">
Â  Â  Â  Â  <span>Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª:</span>
Â  Â  Â  Â  <div class="radio-group">
Â  Â  Â  Â  Â  Â  <label class="radio-item"><input type="radio" name="vvalid" value="ØµØ­ÙŠØ­" hidden> âœ“ ØµØ­ÙŠØ­</label>
Â  Â  Â  Â  Â  Â  <label class="radio-item"><input type="radio" name="vvalid" value="Ø¨Ø§Ø·Ù„" hidden> âœ— Ø¨Ø§Ø·Ù„</label>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="sec-box" style="margin-top:24px;">
Â  Â  Â  <span>Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¹Ø§Ø¬Ù„Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:</span>
Â  Â  Â  <textarea id="urgent-msg" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." style="width:100%;margin-top:8px;border-radius:9px;background:#f9fafb;color:#0f172a;padding:10px;border:1.2px solid #cbd5f5;"></textarea>
Â  Â  Â  <div style="margin-top:12px;">
Â  Â  Â  Â  <button type="button" class="btn-primary" id="send-urgent-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="button-row">
Â  Â  Â  <button type="submit" class="btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª</button>
Â  Â  Â  <button type="reset" class="btn-reset">ØªÙØ±ÙŠØº</button>
Â  Â  Â  <button type="button" class="btn-logout">Ø®Ø±ÙˆØ¬</button>
Â  Â  </div>

Â  Â  <div id="msg-warn" style="display:none;"></div>
Â  Â  <div id="msg-confirm" style="display:none;"></div>
Â  </form>
</div>
<script>
document.getElementById("pass-btn").addEventListener("click", () => {
Â  const pass = document.getElementById("pass-input").value.trim();
Â  const err = document.getElementById("pass-error");

Â  if (pass === "ma100124") {
Â  Â  Â  localStorage.setItem("committee", "men");
Â  Â  Â  location.reload();
Â  }
Â  else if (pass === "wa100125") {
Â  Â  Â  localStorage.setItem("committee", "women");
Â  Â  Â  location.reload();
Â  }
Â  else {
Â  Â  Â  err.textContent = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
Â  Â  Â  err.style.display = "block";
Â  }
});
</script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const firebaseConfig = {
Â  apiKey: "AIzaSyBmgHAmoZKm2RRXg42KWdQHD4e5hAUtBbc",
Â  authDomain: "azizaonly-2ab60.firebaseapp.com",
Â  databaseURL: "https://azizaonly-2ab60-default-rtdb.firebaseio.com",
Â  projectId: "azizaonly-2ab60",
Â  storageBucket: "azizaonly-2ab60.appspot.com",
Â  messagingSenderId: "447237336190",
Â  appId: "1:447237336190:web:eab8a2b524b0dcdd5a3c2f"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

const committeeType = localStorage.getItem("committee");
if (!committeeType) {
Â  Â  document.getElementById("main-container").classList.add("hidden");
Â  Â  document.getElementById("login-box").style.display = "flex";
Â  Â  throw "NO_LOGIN";
}
let committeeNumber = 0;
let committeeName = "";
if (committeeType === "men") {
Â  committeeNumber = 24;
Â  committeeName = "Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ø²ÙŠØ²Ø© - Ù„Ø¬Ù†Ø© Ø§Ù„Ø±Ø¬Ø§Ù„";
} else {
Â  committeeNumber = 25;
Â  committeeName = "Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ø²ÙŠØ²Ø© - Ù„Ø¬Ù†Ø© Ø§Ù„Ù†Ø³Ø§Ø¡";
}
document.getElementById("committee-name-display").textContent = committeeName;
document.getElementById("welcome-title").textContent = "Ø§Ù„Ù„Ø¬Ù†Ø© Ø±Ù‚Ù… " + committeeNumber;
document.getElementById("login-box").style.display = "none";
document.getElementById("main-container").classList.remove("hidden");

const candidates = [
Â  ["1","Ø§ÙŠÙ‡Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø¯Ù‡","ğŸ‘‘"],["2","Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙ…Ø§Ù†Ù‰","ğŸ"],["3","Ø£Ø­Ù…Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ¯Ù‰","ğŸ¦"],["4","Ø¹Ø§Ø¯Ù„ Ø§Ù„Ø¬ÙŠØ§Ø±","ğŸ¦…"],
Â  ["5","Ø§Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø³Ù…Ø±Ù‡","ğŸ’£"],["6","ÙˆÙ„ÙŠØ¯ ØªÙŠØ³ÙŠØ± Ø§Ù„Ø§Ù…ÙŠØ±","ğŸŠ"],["7","ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹ÙŠØ³ÙˆÙ‰","ğŸŒ€"],["8","Ø§Ù„Ø¨Ø¯ÙˆÙ‰ Ø¬Ù…ÙŠØ²","ğŸ‹"],
Â  ["9","Ø§Ø­Ù…Ø¯ Ø§Ù„Ø±ÙŠØ³","ğŸ¦‚"],["10","Ø£Ø­Ù…Ø¯ Ø¹ÙˆÙ","âœ‹"],["11","Ø­Ø³Ù† Ø§Ù„Ù…Ù„Ù‡Ø§Ø·","ğŸŒ¿"],["12","Ø¹Ù…Ø±Ùˆ Ù…Ø­Ù…Ø¯ Ø¨Ø­ÙŠØ±Ù‰","ğŸšŒ"],
Â  ["13","Ø§Ù„Ø³ÙŠØ¯ Ø·Ù…Ø§Ù†","ğŸ”«"],["14","Ù…Ø­Ù…Ø¯ Ø¯Ù†Ø¯Ù†","ğŸš"],["15","Ù…Ø¬Ø¯Ù‰ Ø§Ù„Ø£Ù…ÙŠØ±","ğŸ–Š"]
];
const listBox = document.getElementById("candidate-list");
candidates.forEach(c => {
Â  const item = document.createElement("div");
Â  item.className = "candidate-item";
Â  const checkbox = document.createElement("input");
Â  checkbox.type = "checkbox"; checkbox.value = c[1]; checkbox.className = "candidate-checkbox";
Â  item.innerHTML = `
Â  Â  <div style="display:flex;align-items:center;gap:8px;">
Â  Â  Â  Â  <div class="num-circle">${c[0]}</div>
Â  Â  Â  Â  <span>${c[1]}</span>
Â  Â  </div>
Â  Â  <div>${c[2]}</div>
Â  `;
Â  item.appendChild(checkbox);
Â  item.addEventListener("click", (e) => { if (e.target !== checkbox) checkbox.checked = !checkbox.checked; updateSelection();});
Â  checkbox.addEventListener("change", updateSelection);
Â  listBox.appendChild(item);
});
function updateSelection(){
Â  const checked = document.querySelectorAll(".candidate-checkbox:checked");
Â  if (checked.length > 2) {
Â  Â  Â  checked[checked.length - 1].checked = false;
Â  Â  Â  showWarn("âš ï¸ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±Ø´Ø­ÙŠÙ† ÙÙ‚Ø·");
Â  }
Â  document.querySelectorAll(".candidate-item").forEach(item => {
Â  Â  Â  const cb = item.querySelector("input");
Â  Â  Â  item.classList.toggle("selected", cb.checked);
Â  });
}
document.querySelectorAll("input[name='vvalid']").forEach(r => {
Â  r.addEventListener("change", () => {
Â  Â  document.querySelectorAll(".radio-item").forEach(x => x.classList.remove("selected"));
Â  Â  r.closest(".radio-item").classList.add("selected");
Â  });
});
function showWarn(msg){
Â  const b = document.getElementById("msg-warn");
Â  b.textContent = msg;
Â  b.style.display = "block";
Â  setTimeout(() => b.style.display = "none", 2600);
}
function showConfirm(msg){
Â  const b = document.getElementById("msg-confirm");
Â  b.textContent = msg;
Â  b.style.display = "block";
Â  setTimeout(() => b.style.display = "none", 3000);
}
document.getElementById("vote-form").addEventListener("submit", e => {
Â  e.preventDefault();
Â  let voterName = document.getElementById("voter-name").value.trim();
Â  if (!voterName) voterName = "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";
Â  const selected = Array.from(
Â  Â  Â  document.querySelectorAll(".candidate-checkbox:checked")
Â  ).map(x => x.value);
Â  const validity = document.querySelector("input[name='vvalid']:checked");
Â  if (selected.length < 1) return showWarn("â— Ø§Ø®ØªØ± Ù…Ø±Ø´Ø­ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
Â  if (!validity) return showWarn("â— Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª");
Â  const btn = document.querySelector(".btn-primary");
Â  btn.disabled = true;
Â  btn.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";
Â  const key = Date.now();
Â  set(ref(db, "votes/aziza/" + key), {
Â  Â  Â  name: voterName,
Â  Â  Â  selected: selected,
Â  Â  Â  vote_validity: validity.value,
Â  Â  Â  committee: committeeNumber,
Â  Â  Â  timestamp: key
Â  })
Â  .then(() => {
Â  Â  Â  showConfirm("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!");
Â  Â  Â  document.getElementById("vote-form").reset();
Â  Â  Â  document.querySelectorAll(".candidate-item").forEach(i => i.classList.remove("selected"));
Â  Â  Â  document.querySelectorAll(".radio-item").forEach(i => i.classList.remove("selected"));
Â  })
Â  .catch(err => showWarn("âŒ Ø®Ø·Ø£: " + err.message))
Â  .finally(() => {
Â  Â  Â  btn.disabled = false;
Â  Â  Â  btn.textContent = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª";
Â  });
});
document.querySelector(".btn-logout").addEventListener("click", () => {
Â  localStorage.removeItem("committee");
Â  location.reload();
});

// Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ø¬Ù„Ø©: ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ØªÙØ±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø·
document.getElementById("send-urgent-btn").addEventListener("click", () => {
Â  const msg = document.getElementById("urgent-msg").value.trim();
Â  if (!msg) return showWarn("â— Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹");
Â  
Â  const fromCommittee = committeeType === "men" ? "Ù„Ø¬Ù†Ø© Ø§Ù„Ø±Ø¬Ø§Ù„" : "Ù„Ø¬Ù†Ø© Ø§Ù„Ù†Ø³Ø§Ø¡";
Â  const payload = {
Â  Â  Â  msg, 
Â  Â  Â  from: fromCommittee, 
Â  Â  Â  time: Date.now(),
Â  Â  Â  committee_num: committeeNumber // Ø¥Ø¶Ø§ÙØ© Ø±Ù‚Ù… Ø§Ù„Ù„Ø¬Ù†Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙŠ Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„
Â  };
Â  
Â  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ù…ÙˆØ­Ø¯ Ø¹Ù„Ù‰ Firebase
Â  set(ref(db, `urgent_msgs/global/${Date.now()}`), payload)
Â  .then(() => {
Â  Â  Â  showConfirm("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­");
Â  Â  Â  document.getElementById("urgent-msg").value = "";
Â  })
Â  .catch(err => showWarn("âŒ Ø®Ø·Ø£: " + err.message));
});

// Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ Ø§Ù„Ø­ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
const notifyRef = ref(db, `notifications/committee_${committeeNumber}`);
onValue(notifyRef, (snap) => {
Â  const data = snap.val();
Â  if(!data) return;
Â  const arr = Object.values(data);
Â  const last = arr[arr.length-1];
Â  if(!last) return;
Â  showWarn("ğŸ”” " + last.message);
});
</script>
</body>
</html>
